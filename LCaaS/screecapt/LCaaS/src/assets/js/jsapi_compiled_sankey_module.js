var gvjs_Y3="linktable",gvjs_Z3="sankey.link.color.focused",gvjs__3="sankey.link.color.selected",gvjs_03="sankey.link.color.unfocused",gvjs_Bma="sankey.link.color.unselected",gvjs_13="sankey.node.color.focused",gvjs_Cma="sankey.node.color.selected",gvjs_Dma="sankey.node.color.unfocused",gvjs_Ema="sankey.node.color.unselected",gvjs_23="sankey.node.label.focused",gvjs_Fma="sankey.node.label.selected",gvjs_Gma="sankey.node.label.unfocused",gvjs_Hma="sankey.node.label.unselected",gvjs_33="unique";
function gvjs_43(){}gvjs_l(gvjs_43,gvjs_wm);gvjs_43.prototype.Xb=function(a){try{this.Ic(a)}catch(b){return!1}return!0};
gvjs_43.prototype.Ic=function(a){if(gvjs_Nh(a)){var b=a,c=gvjs_xm(b[0]);b=gvjs_xm(b[1]);var d=c.Z();if(3>d)throw Error("Invalid linkTable format: must have at least 3 columns.");this.jb(gvjs_Y3,c,0,gvjs_c);this.jb(gvjs_Y3,c,1,gvjs_c);this.jb(gvjs_Y3,c,2,gvjs_c);var e=null,f=a=null,g=3;3<d&&""==c.yi(3)&&(this.jb(gvjs_Y3,c,3,gvjs_c),e=3,g=4);for(;g<c.Z();++g)d=c.yi(g),d==gvjs_0a&&null===a?(a=g,this.jb(gvjs_Y3,c,g,gvjs_e)):d==gvjs_4g&&null===f&&(f=g,this.jb(gvjs_Y3,c,g,gvjs_e));d=b.Z();if(1!==d&&2!==
d)throw Error("Invalid nodeTable format: must have 1 or 2 columns.");this.jb("nodetable",b,0,gvjs_e);2===d&&this.jb("nodetable",b,1,gvjs_e);var h=[],k=[],l=b.aa();g=0;for(var m=c.aa();g<m;++g){var n=c.getValue(g,0),p=c.getValue(g,1);if(n>=l||p>=l)throw Error("Invalid linkTable row: source and target nodes must be in the range 0 to "+(l-1)+".");var q=c.getValue(g,2),r=null,t=null,u=null;null!=a&&(r=c.getStringValue(g,a));null!=e&&(t=c.getValue(g,e));null!=f&&(u=c.getValue(g,f));k.push({source:n,target:p,
value:q,style:r,tooltip:u,opacity:t})}g=0;for(m=b.aa();g<m;++g)h.push({name:b.getValue(g,0),Eb:2===d?b.getValue(g,1):""});return{links:k,nodes:h,gF:f,cR:e}}a=gvjs_xm(a);f=a.Z();if(3>f)throw Error("Invalid data table format: must have at least 3 columns.");this.jb(gvjs_ur,a,0,gvjs_e);this.jb(gvjs_ur,a,1,gvjs_e);this.jb(gvjs_ur,a,2,gvjs_c);e=b=c=null;d=3;3<f&&""==a.yi(3)&&(this.jb(gvjs_ur,a,3,gvjs_c),c=3,d=4);for(f=d;f<a.Z();++f)d=a.yi(f),d==gvjs_0a&&null===b?(b=f,this.jb(gvjs_ur,a,f,gvjs_e)):d==gvjs_4g&&
null===e&&(e=f,this.jb(gvjs_ur,a,f,gvjs_e));f=new gvjs_Dh;d=[];g=[];h=0;for(k=a.aa();h<k;++h)l=a.getStringValue(h,0),m=a.getStringValue(h,1),l=gvjs_Ima(f,d,l),m=gvjs_Ima(f,d,m),n=a.getValue(h,2),p=null,null!=b&&(p=a.getStringValue(h,b)),q=null!=e?a.getValue(h,e):null,r=null,null!=c&&(r=a.getValue(h,c)),g.push({source:l,target:m,value:n,style:p,tooltip:q,opacity:r});return{links:g,nodes:d,gF:e,cR:c}};
function gvjs_Ima(a,b,c){if(a.ze(c))return a.get(c);a.set(c,b.length);b.push({name:c,Eb:""});return b.length-1}gvjs_43.prototype.jb=function(a,b,c,d,e){if(!gvjs_Am(b,c,d,e))throw Error(gvjs_ap+a+": column #"+c+gvjs_ze+d+"'.");};function gvjs_53(a,b){gvjs_dS.call(this);this.pa=null;this.Oi=b;this.tI=null;this.e2=new gvjs_E;this.d2=new gvjs_E;this.ua=a}gvjs_l(gvjs_53,gvjs_dS);
gvjs_53.prototype.kB=function(a){var b=[],c=gvjs_MK(a.$a());this.pa&&(this.ua.mg?gvjs_yI(this.pa,this.Oi.getContainer()):b.push(new gvjs_cS(gvjs_AI(this.pa,c).j(),new gvjs_OK(gvjs_cR),gvjs_4g)),this.pa=null);var d=new gvjs_E,e=new gvjs_E,f=new gvjs_E,g=new gvjs_E;null!=this.tI&&gvjs_Jma(this,this.tI,e,d);gvjs_Tw(this.d2,function(n){var p=this.ua.paths[n];f.add(n);g.add(p.RX);g.add(p.b4)},this);gvjs_Tw(this.e2,function(n){gvjs_Kma(this,n,f,g)},this);var h=0<g.tb(),k=0<d.tb();gvjs_m(this.ua.labels,
function(n,p){var q=n.styles.Kd,r=gvjs_iR;g.contains(p)&&d.contains(p)?(q=n.styles.xK,r=gvjs_yp):d.contains(p)?q=n.styles.focused:g.contains(p)?(q=n.styles.selected,r=gvjs_yp):h&&k?q=n.styles.yL:h?q=n.styles.xL:k&&(q=n.styles.wL);n=c.Gs(n.text,n.x,n.y,n.width,n.angle,n.Mz,n.Nz,q);p=gvjs_QK(gvjs_QK(new gvjs_OK(gvjs_Vo),gvjs_ip,p),gvjs_mp,gvjs_xg);b.push(new gvjs_cS(n,p,r))},this);gvjs_m(this.ua.FR,function(n,p){var q=gvjs_QK(gvjs_QK(gvjs_PK(p),gvjs_mp,"node"),"NAME",this.ua.labels[p].text),r=n.Vb.Kd,
t=gvjs_iR;g.contains(p)&&d.contains(p)?(r=n.Vb.xK,t=gvjs_nR):d.contains(p)?r=n.Vb.focused:g.contains(p)?(t=gvjs_nR,r=n.Vb.selected):h&&k?r=n.Vb.yL:h?r=n.Vb.xL:k&&(r=n.Vb.wL);n=c.Ll(n.x,n.y,n.width,n.height,r);b.push(new gvjs_cS(n,q,t))},this);var l=0<f.tb(),m=0<e.tb();gvjs_m(this.ua.paths,function(n,p){var q=gvjs_QK(gvjs_QK(new gvjs_OK(gvjs_hp),gvjs_ip,p),gvjs_mp,"link"),r=n.Vb.Kd,t=gvjs_Mu;f.contains(p)&&e.contains(p)?(r=n.Vb.xK,t=gvjs_nR):e.contains(p)?r=n.Vb.focused:f.contains(p)?(t=gvjs_nR,r=
n.Vb.selected):l&&m?r=n.Vb.yL:l?r=n.Vb.xL:m&&(r=n.Vb.wL);n=c.Kc(n.Fc,r);b.push(new gvjs_cS(n,q,t))},this);return b};gvjs_53.prototype.Yb=function(){return this.ua.size};function gvjs_Jma(a,b,c,d){var e=b.qb.SUBTYPE;null!=a.tI&&(b=a.tI.qb.ROW_INDEX,"node"===e?gvjs_Kma(a,b,c,d):"link"===e&&(a=a.ua.paths[b],c.add(b),d.add(a.RX),d.add(a.b4)))}function gvjs_Kma(a,b,c,d){d.add(b);gvjs_m(a.ua.Jsa[b].Ka(),function(e){c.add(e);e=this.ua.paths[e];d.add(e.RX);d.add(e.b4)},a)}
gvjs_53.prototype.zm=function(a,b,c){switch(b.type){case gvjs_4g:a.type()===gvjs_hp?this.Ty(a,c):a.type();break;case gvjs_8r:a.type()===gvjs_hp?this.tI=c?a:null:a.type();break;case gvjs_z:a.type()===gvjs_hp&&(b=a.qb.ROW_INDEX,"node"===a.qb.SUBTYPE?c?this.e2.add(b):this.e2.remove(b):c?this.d2.add(b):this.d2.remove(b))}};
gvjs_53.prototype.Ty=function(a,b){this.Oi.clear();this.pa=null;if(b){b=a.qb.SUBTYPE;var c=a.qb.ROW_INDEX;a=this.ua.size;a=new gvjs_G(0,a.width,a.height,0);var d=null,e=null,f=null,g=null;"node"==b?(g=this.ua.FR[c],e=new gvjs_C(g.x,g.y),f=gvjs_5x(e,new gvjs_C(-1,1))):"link"==b&&(g=this.ua.paths[c],b=g.Fc,e=new gvjs_C((b.Fc[0].data.x+b.Fc[1].data.x)/2,(b.Fc[0].data.y+b.Fc[1].data.y)/2),f=gvjs_5x(e,new gvjs_C(-1,1)));g.tooltip&&e&&f&&(g.tooltip.content&&this.ua.mg?d={html:gvjs_Mx(gvjs_Qa,{"class":gvjs_ts},
gvjs_9w(g.tooltip.content)),vN:g.tooltip.Yh,RJ:f,anchor:e,mG:a,spacing:20,margin:5}:(b={entries:[]},g.tooltip.content?b.entries.push(gvjs_ZD(g.tooltip.content,this.ua.Op)):g.tooltip.title&&(b.entries.push(gvjs_ZD(g.tooltip.title,this.ua.Op)),b.entries.push(gvjs_ZD(g.tooltip.mxa.toString(),this.ua.Op,g.tooltip.kxa,this.ua.Op)),g.tooltip.Tca&&g.tooltip.Uca&&b.entries.push(gvjs_ZD(g.tooltip.Uca.toString(),this.ua.Op,g.tooltip.Tca,this.ua.Op))),d=gvjs_1D(b,this.ua.Gc,!1,e,a,f,void 0,this.ua.mg)));d&&
(this.pa=d)}};var gvjs_Lma={NONE:gvjs_b,tBa:"source",FBa:"target",dAa:gvjs_vs},gvjs_Mma={sU:gvjs_Gq,SBa:gvjs_33};function gvjs_Nma(a,b,c,d){this.R=a;this.m=b;this.ce=c;this.bb=d;this.fb=(new gvjs_43).Ic(a);this.nsa=gvjs_t(b,"sankey.iterations");this.mba=gvjs_5w(b,"sankey.link.color");gvjs_5w(b,"sankey.link.focused");gvjs_5w(b,"sankey.link.unfocused");a=b.MC("sankey.link.colors");this.nba=null==a?null:gvjs_n(a,function(e){return gvjs_ad(gvjs_6c(e).hex)});this.iD=gvjs_r(b,"sankey.link.colorMode",gvjs_b,gvjs_Lma);this.pma=gvjs_t(b,"sankey.link.defaultOpacity",this.mba.gf);this.Wba=gvjs_t(b,"sankey.link.minOpacity",
.2);this.ata=gvjs_t(b,"sankey.link.maxOpacity",.6);a=b.MC("sankey.node.colors");this.Nta=null==a?null:gvjs_n(a,function(e){return gvjs_ad(gvjs_6c(e).hex)});this.Mta=gvjs_5w(b,"sankey.node.color");this.q0=gvjs_r(b,"sankey.node.colorMode",gvjs_33,gvjs_Mma);this.oP=gvjs_s(b,gvjs_Ns,!1);this.Ze=gvjs_6w(b,"sankey.node.label");this.Xaa=gvjs_t(b,"sankey.node.labelPadding");this.Ota=gvjs_t(b,"sankey.node.nodePadding");this.Pta=gvjs_t(b,"sankey.node.width")}
gvjs_Nma.prototype.sh=function(){var a=gvjs_Oma(this);gvjs_Pma(a);var b=this.Ze.fontSize;b=d3.sankey().nodeWidth(this.Pta).nodePadding(this.Ota).size([this.bb.width,this.bb.height-b/2]).iterations(this.nsa);b(a);gvjs_Qma(a.nodes);var c=new gvjs_qS(this.oP,this.Nta),d=new gvjs_qS(this.oP,this.nba),e=[],f=[],g=[],h=null==this.nba&&this.q0===gvjs_33;gvjs_m(a.nodes,function(w,x){w.idx=x;c.Cu(this.q0===gvjs_Gq?w.Eb:String(x));h||("source"===this.iD&&0<w.sourceLinks.length||"target"===this.iD&&0<w.targetLinks.length||
this.iD===gvjs_vs)&&d.Cu(String(x))},this);var k=null;null!=this.fb.gF&&(k=this.fb.gF);var l=this.R.Ca(2);null===l&&(l="Width");var m=null;null!=this.fb.cR&&(m=this.R.Ca(this.fb.cR),null===m&&(m="Opacity"));var n=Infinity,p=-Infinity;null!=this.fb.cR&&gvjs_m(a.links,function(w){null!=w.opacity&&(n=Math.min(n,w.opacity),p=Math.max(p,w.opacity))},this);var q=c.sd(),r=h?q:d.sd();gvjs_m(a.links,function(w,x){w.idx=x;var y=this.pma;null!=w.opacity&&p>n&&(y=this.Wba+(w.opacity-n)/(p-n)*(this.ata-this.Wba));
var z=this.mba.clone();z.Af(y);y="source"===this.iD?String(w.source.idx):"target"===this.iD?String(w.target.idx):null;null!=y?z.df(r.Kq(y)):this.iD===gvjs_vs&&gvjs_Jw(z,{gg:r.Kq(String(w.source.idx)),If:r.Kq(String(w.target.idx)),Ln:1,Mn:1,x1:gvjs_wo,y1:0,x2:gvjs_zo,y2:0,fo:!0,Fp:!1});y=w.style;null!=y&&(y=gvjs_WH(y),null!=y&&(y=new gvjs_qd([y]),z.df(gvjs_3w(y,[gvjs_0r,gvjs_Zr],z.mb())),z.Af(gvjs_2w(y,gvjs_1r,z.gf)),z.wd(gvjs_3w(y,[gvjs_tv,gvjs_ov],z.Bf)),gvjs_Hw(z,gvjs_2w(y,gvjs_uv,z.Ui)),z.sl(gvjs_t(y,
gvjs_vv,z.Ub))));x=null!=k&&w.tooltip?{Yh:!(!this.R.getProperty(x,k,gvjs_Ws)&&!this.R.Ye(k,gvjs_Ws)),content:w.tooltip}:{title:w.source.name+" -> "+w.target.name,kxa:l,mxa:w.value,Tca:m,Uca:w.opacity};y=new gvjs_mz;var A=w.source.x0+(w.source.x1-w.source.x0),B=w.source.y0+(w.y0-w.source.y0-w.width/2),F=w.target.x0,D=w.target.y0+(w.y1-w.target.y0-w.width/2),I=(F-A)/3;y.move(A,B);y.Qp(A+I,B,A+2*I,D,F,D);y.wa(F,D+w.width);y.Qp(A+2*I,D+w.width,A+I,B+w.width,A,B+w.width);y.close();A=null==this.m.ea(gvjs__3)?
z.clone().Af(.8):gvjs_5w(this.m,gvjs__3,z);B=null==this.m.ea(gvjs_Z3)?z.clone().Af(.8):gvjs_5w(this.m,gvjs_Z3,z);F=gvjs_5w(this.m,gvjs_03,z);D=null==this.m.ea(gvjs_Bma)?z.clone().Af(.2):gvjs_5w(this.m,gvjs_Bma,z);I=gvjs_5w(this.m,gvjs_Z3,A);var H=gvjs_5w(this.m,gvjs_03,D);e.push({Vb:{Kd:z,selected:A,focused:B,wL:F,xL:D,xK:I,yL:H},tooltip:x,RX:w.source.idx,b4:w.target.idx,Fc:y})},this);var t=this.bb.width,u=b.nodeWidth(),v={};gvjs_m(a.nodes,function(w,x){var y=new gvjs_E;gvjs_m(w.sourceLinks,function(J){y.add(J.idx)},
this);gvjs_m(w.targetLinks,function(J){y.add(J.idx)},this);v[x]=y;x=w.x0<t/2;var z=this.Mta.clone();z.df(q.Kq(this.q0===gvjs_Gq?w.Eb:String(w.idx)));z.wd(z.mb(),0);var A=null==this.m.ea(gvjs_Cma)?z.clone().Af(1):gvjs_5w(this.m,gvjs_Cma,z),B=null==this.m.ea(gvjs_13)?z.clone().Af(1):gvjs_5w(this.m,gvjs_13,z),F=gvjs_5w(this.m,gvjs_Dma,z),D=null==this.m.ea(gvjs_Ema)?z.clone().Af(.2):gvjs_5w(this.m,gvjs_Ema,z),I=gvjs_5w(this.m,gvjs_13,A),H=gvjs_5w(this.m,gvjs_Dma,D);g.push({Vb:{Kd:z,selected:A,focused:B,
wL:F,xL:D,xK:I,yL:H},x:w.x0,y:w.y0,tooltip:w.tooltip,width:u,height:w.y1-w.y0});z=null==this.m.ea(gvjs_Fma)?gvjs_Pw((new gvjs_Rw(this.Ze)).setOpacity(.8),!0):gvjs_6w(this.m,gvjs_Fma,this.Ze);A=null==this.m.ea(gvjs_23)?gvjs_Pw((new gvjs_Rw(this.Ze)).setOpacity(.8),!0):gvjs_6w(this.m,gvjs_23,this.Ze);B=gvjs_6w(this.m,gvjs_Gma,this.Ze);F=null==this.m.ea(gvjs_Hma)?(new gvjs_Rw(this.Ze)).setOpacity(.4):gvjs_6w(this.m,gvjs_Hma,this.Ze);D=gvjs_6w(this.m,gvjs_23,z);I=gvjs_6w(this.m,gvjs_Gma,F);f.push({angle:0,
Mz:x?gvjs_0:gvjs_Y,Nz:gvjs_W,styles:{Kd:this.Ze,selected:z,focused:A,wL:B,xL:F,xK:D,yL:I},text:w.name,width:0,x:x?w.x0+u+this.Xaa:w.x0-this.Xaa,y:w.y0+(w.y1-w.y0)/2})},this);return{labels:f,paths:e,FR:g,Jsa:v,nodeWidth:u,size:this.bb,Gc:this.ce,mg:gvjs_s(this.m,gvjs_Ov,!0),Op:gvjs_6w(this.m,gvjs_Qv)}};function gvjs_Oma(a){a=a.fb;return{nodes:a.nodes,links:a.links}}
function gvjs_Pma(a){var b=gvjs_n(a.nodes,function(e,f){return{index:f,fga:[]}});gvjs_m(a.links,function(e){b[e.source].fga.push(b[e.target])});a=new gvjs_E(b);for(var c=new gvjs_E,d=0;0<a.tb();){if(d>b.length)throw a=gvjs_n(a.Ka(),function(e){return e.index}).join(","),Error("Cycle found in rows: "+a);gvjs_m(a.Ka(),function(e){gvjs_m(e.fga,function(f){c.add(f)})});a=c;c=new gvjs_E;d++}}
function gvjs_Qma(a){gvjs_m(a,function(b){gvjs__h(b.targetLinks,function(c,d){function e(f){return(f.target.y0-(f.source.y0+(f.y0-f.source.y0-f.width/2)))/(f.target.x0-f.source.x0)}return e(d)-e(c)})});gvjs_m(a,function(b){var c=0;gvjs_m(b.targetLinks,function(d){d.y1=c+d.target.y0+d.width/2;c+=d.width})})};function gvjs_63(a){gvjs__K.call(this,a)}gvjs_l(gvjs_63,gvjs__K);gvjs_=gvjs_63.prototype;gvjs_.Gq=function(){return{NAME:gvjs_Ut}};
gvjs_.Of=function(){return{backgroundColor:{fill:gvjs_jw,stroke:gvjs_oq,strokeWidth:10,strokeOpacity:.2},tooltip:{isHtml:!1,textStyle:{fontName:gvjs_Uo,fontSize:16,color:gvjs_oq}},sankey:{iterations:32,link:{colorMode:gvjs_b,color:{fill:"#aaa",fillOpacity:.8,stroke:gvjs_b},defaultOpacity:.6,minOpacity:.2,maxOpacity:.6},node:{colorMode:gvjs_33,color:{fill:gvjs_oq,fillOpacity:.8},label:{fontName:gvjs_Ou,fontSize:10,color:gvjs_4n,bold:!1,italic:!1},labelPadding:6,nodePadding:10,width:10,interactivity:!1,
selectionMode:gvjs_av}}}};gvjs_.Bo=function(a,b){return new gvjs_53(a,b)};gvjs_.$m=function(a,b,c,d){return new gvjs_Nma(a,b,c,d)};gvjs_.kq=function(a,b,c,d){a=gvjs_63.o.kq.call(this,a,b,c,d);a.iu([gvjs_Mu,gvjs_iR,gvjs_Lu,gvjs_nR,gvjs_zp,gvjs_yp,gvjs_4g]);return a};
gvjs_.Fs=function(a){var b=gvjs_s(a,"sankey.node.interactivity",!1),c=[new gvjs_9R([new gvjs_OK(gvjs_hp)]),new gvjs_bS([new gvjs_OK(gvjs_hp)])];b&&c.push(new gvjs_aS([gvjs_QK(new gvjs_OK(gvjs_hp),gvjs_mp,"node")]));gvjs_s(a,"sankey.link.interactivity",!1)&&(a=gvjs_r(a,"sankey.link.selectionMode",gvjs_av)===gvjs_av,c.push(new gvjs_$R([gvjs_QK(new gvjs_OK(gvjs_hp),gvjs_mp,"link")],a)));return c};gvjs_h(gvjs_hg,gvjs_63,void 0);gvjs_63.prototype.draw=gvjs_63.prototype.draw;gvjs_63.prototype.setSelection=gvjs_63.prototype.setSelection;gvjs_63.prototype.getSelection=gvjs_63.prototype.getSelection;gvjs_63.prototype.clearChart=gvjs_63.prototype.Nb;gvjs_63.prototype.getContainer=gvjs_63.prototype.getContainer;